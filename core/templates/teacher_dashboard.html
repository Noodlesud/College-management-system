{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Student Grade</title>
    <link rel="stylesheet" href="{% static 'css/table.css' %}">
    <style>
        .course-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .course-table th, .course-table td {
            padding: 10px;
            
        }
        
        .course-table thead {
            background-color: #b8b6b6;
        }
        
        .course-table tbody tr:nth-child(odd) {
            background-color: #f9f9f9;
        }
        
        .marks-input {
            width: 50px;
        padding: 4px;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: inset 0 1px 3px rgba(0.6, 0.4, 0.2, 0.4);
        transition: all 0.3s ease;
        }
       
        .center {
            text-align: center;
        }
        .course-table td {
            text-align: left;
        }
        .course-table th {
            padding-bottom: 20px;
            
            text-align: center;
        }
        
        .teacher-container {
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 20px;
            margin-bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            box-sizing: border-box;
        }
        .nav-buttons {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 20px;
            width: 100%;
            text-align: right;
        }
        
        .nav-buttons a {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        
    </style>
</head>
<body>
    <div id="teacher-container" class="teacher-container">
        <div>
            <p>Name: Teacher Name</p>
        </div>
        <div>
            <p>Course: Course Name</p>
        </div>
        <div>
            <p>Section: Class</p>
        </div>
    </div>

    <!-- Grade Student Form -->
    <div id="registration-container">
        <div class="nav-buttons">
            <a id="add-student-btn" class="active">send</a>
            
        </div>
        <div id="add-student-form" class="form active">
            <table class="course-table">
                <thead>
                    <tr>
                        <th rowspan="2">ID</th>
                        <th rowspan="2">Name</th>
                        <th class="center" colspan="5">Marks</th>
                        <th rowspan="2">Result</th>
                    </tr>
                    <tr>
                        <th><input type="number" id="marks_5" name="marks_5" min="0" class="marks-input"></th>
                        <th><input type="number" id="marks_10" name="marks_10" min="0" class="marks-input"></th>
                        <th><input type="number" id="marks_20" name="marks_20" min="0" class="marks-input"></th>
                        <th><input type="number" id="marks_30" name="marks_30" min="0" class="marks-input"></th>
                        <th><input type="number" id="marks_50" name="marks_50" min="0" class="marks-input"></th>
                        
                    </tr>
                </thead>
                <tbody id="student-list">
                    <!-- Student rows will be injected here by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Register Student Form (Hidden by Default) -->
    <div id="register-student-form" class="form">
        <!-- Registration form content goes here -->
    </div>

    <script>
        // Student data as a list of objects
        const students = [
            {id: 1, name: 'John Doe'},
            {id: 2, name: 'Jane Smith'},
            {id: 3, name: 'Alice Johnson'},
            {id: 4, name: 'Michael Brown'},
            {id: 5, name: 'Emily Davis'},
            {id: 6, name: 'David Wilson'},
            {id: 7, name: 'Sophia Martinez'},
            {id: 8, name: 'Chris Lee'},
            {id: 9, name: 'Jessica Taylor'},
            {id: 10, name: 'James Anderson'},
            {id: 11, name: 'Olivia Thomas'},
            {id: 12, name: 'Benjamin Scott'},
            {id: 13, name: 'Emma Harris'},
            {id: 14, name: 'Alexander Lewis'},
            {id: 15, name: 'Charlotte Walker'}
        ];
    
        // Function to calculate total marks and update result
        function updateResults() {
            const rows = document.querySelectorAll('#student-list tr');
            rows.forEach(row => {
                const inputs = row.querySelectorAll('input.marks-input');
                let total = 0;
                inputs.forEach(input => {
                    total += parseFloat(input.value) || 0; // Sum up the values
                });
    
                // Update the result cell
                const resultCell = row.querySelector('.result-cell');
                if (total > 100) {
                    resultCell.textContent = 'Error'; // Display an error message or handle the case
                    resultCell.style.color = 'red'; // Optional: style the error
                } else {
                    resultCell.textContent = total; // Update with the total
                    resultCell.style.color = ''; // Reset styling
                }
            });
        }
    
        // Inject student data into the table
        const studentList = document.getElementById('student-list');
    
        students.forEach(student => {
            const row = document.createElement('tr');
    
            const idCell = document.createElement('td');
            idCell.textContent = student.id;
    
            const nameCell = document.createElement('td');
            nameCell.textContent = student.name;
            nameCell.className = 'name-field';
    
            row.appendChild(idCell);
            row.appendChild(nameCell);
    
            // Create mark input fields after the name
            const marks = ['marks_5', 'marks_10', 'marks_20', 'marks_30', 'marks_50'];
            marks.forEach(mark => {
                const markCell = document.createElement('td');
                const input = document.createElement('input');
                input.type = 'number';
                input.name = mark;
                input.min = '0';
                input.className = 'marks-input';
                input.addEventListener('input', updateResults); // Recalculate result on input
                markCell.appendChild(input);
                row.appendChild(markCell);
            });
    
            // Add a cell for Result (can be used to display calculated result)
            const resultCell = document.createElement('td');
            resultCell.className = 'result-cell';
            resultCell.textContent = '0'; // Initial placeholder text for result
            row.appendChild(resultCell);
    
            studentList.appendChild(row);
        });
        const markInputs = [
        document.getElementById('marks_5'),
        document.getElementById('marks_10'),
        document.getElementById('marks_20'),
        document.getElementById('marks_30'),
        document.getElementById('marks_50')
    ];
        markInputs.forEach(input => {
            input.addEventListener('input', () => {
                let totalMarks = markInputs.reduce((total, input) => {
                    return total + (parseInt(input.value) || 0);
                }, 0);

                if (totalMarks > 100) {
                    alert('Total marks cannot exceed 100.');
                    input.value = 0; // Reset the last input to prevent exceeding 100
                }
            });
        });
        // Switch between forms
        document.getElementById('add-student-btn').addEventListener('click', function() {
            document.getElementById('add-student-form').classList.add('active');
            document.getElementById('register-student-form').classList.remove('active');
            this.classList.add('active');
            document.getElementById('register-student-btn').classList.remove('active');
        });
    
        document.getElementById('register-student-btn').addEventListener('click', function() {
            document.getElementById('register-student-form').classList.add('active');
            document.getElementById('add-student-form').classList.remove('active');
            this.classList.add('active');
            document.getElementById('add-student-btn').classList.remove('active');
        });
    </script>
    
</body>
</html>
